<!DOCTYPE html><html lang="en-US"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="keywords" content="eric,cornelissen,multi-threading,python,data,data analysis,data analytics"><meta name="title" content="Eric Cornelissen - Controlled Vocabulary Tool"><meta name="theme-color" content="#212121"><meta property="og:title" content="Eric Cornelissen - Controlled Vocabulary Tool"><meta property="og:type" content="website"><meta property="og:url" content="https://www.ericcornelissen.nl/archive/controlled-vocabulary-tool"><meta property="og:locale" content="en-US"><meta name="twitter:card" content="summary"><meta name="twitter:creator" content="@ericornelissen"><link href="/styles/bundle.css" rel="stylesheet" type="text/css"><script async="false" src="/scripts/global.js" type="text/javascript"></script><link href="/assets/favicon.svg" rel="icon" sizes="any" type="image/svg+xml"><link href="/assets/favicon-32.png" rel="icon" sizes="32x32" type="image/png"><link href="/assets/favicon-16.png" rel="icon" sizes="16x16" type="image/png"><title>Eric Cornelissen - Controlled Vocabulary Tool</title></head><body><header class="header header--compact"><div class="header__container"><a class="header__logo" href="/" rel="noopener"><img alt="Personal logo" src="/assets/favicon.svg"></a><h1 class="header__title short-underline short-underline--inverse">Eric Cornelissen</h1><p class="header__message">Hey there &#x1F44B; I&apos;m software engineering and open source enthusiast with an interest in security and usability. You can find me and my work right here or at the links below.</p><ol class="breadcrumbs"><li class="crumb"><a href="/" rel="noopener">Home</a></li><li class="crumb"><a href="/archive" rel="noopener">Archive</a></li><li class="crumb">Controlled Vocabulary Tool</li></ol><ul class="header__list list-of-icons"><li class="list-item"><a class="icon icon-mail icon--hover" aria-label="link to my mail" href="mailto:ericornelissen@gmail.com?Subject&#x3D;Hey%20Eric" rel="noopener" target="_top"></a></li><li class="list-item"><a class="icon icon-github icon--hover" aria-label="link to my GitHub" href="https://github.com/ericcornelissen" rel="noopener" target="_self"></a></li><li class="list-item"><a class="icon icon-codepen icon--hover" aria-label="link to my Codepen" href="https://codepen.io/ericornelissen/" rel="noopener" target="_self"></a></li><li class="list-item"><a class="icon icon-linkedin icon--hover" aria-label="link to my LinkedIn" href="https://www.linkedin.com/in/ericornelissen/" rel="noopener" target="_self"></a></li><li class="list-item"><a class="icon icon-stackoverflow icon--hover" aria-label="link to my stackoverflow" href="https://stackoverflow.com/users/4132379/ericornelissen" rel="noopener" target="_self"></a></li></ul></div></header><main class="main"><article class="section"><ul class="article__links list-of-icons list-of-icons--large"><li class="list-item"><a class="icon icon-github icon--hover" aria-label="link to the project's GitHub" href="https://github.com/ericcornelissen/controlled-vocab" rel="noopener" target="_self"></a></li></ul><h2 class="short-underline">Controlled Vocabulary Tool</h2><p class="article__date">2017 - 2018</p><p class="article__about" data-name="about">A multi-threaded Python CLI tool to create a controlled vocabulary.</p><ul class="tags"><li class="tag">Multi-Threading</li><li class="tag">Python</li></ul><h3 class="short-underline">Description</h3><p>I was inspired to start this project while reading <a class="text-link" href="https://github.com/infoactive/data-design" rel="noopener">Data+Design</a> by Trina Chiasson and Dyanna Gregory (and over 50 global contributors). Chapter 4 contains a section named <i>Controlling for Inconsistencies</i>. Upon reading it I figured it was a good simple problem that can benefit from a multi-threaded solution. I decided to work in Python for quick and easy development.</p><p>The main idea of the project was to create a CLI tool that, using multiple threads, can convert a dataset into a new dataset with a controlled vocabulary (see image below). The multiple threads should utilize the fact that the user giving a mapping for a value takes a few seconds. During this time the tool can read input, convert values for which it already has a mapping, and output mapped values.</p><figure class="article__figure"><img class="article__image" alt="illustration of controlled vocabulary" src="https://raw.githubusercontent.com/infoactive/data-design/master/images/sections/04/controlled-vocabulary.png"><figcaption class="text-secondary">Illustration of controlled vocabulary taken from Data+Design.</figcaption></figure><p>With this goal in mind I first drafted a single-threaded script that read input from a file, prompted the user for a conversion and displayed the resulting dataset in the console. The next step was to do this on three different threads: one to read, one to convert, and one to output. To let the threads communicate with each other I created a few global variables accompanied by mutexes to align usage of the global variables between the threads, see the diagram below.</p><figure class="article__figure"><img class="article__image" alt="diagram of global variable usage by different threads" src="https://raw.githubusercontent.com/ericcornelissen/controlled-vocab/master/diagrams/global_variable_usage.jpg"><figcaption class="text-secondary">Diagram of global variable usage by different threads.</figcaption></figure><p>Finally I separated the conversion thread into a conversion and prompting thread, so the tool can convert newly read values while the user is being prompted for a mapping. And also added an option to output to a file, fuse multiple input files into one output file, output the conversion map created, and to use an existing mapping for conversion.</p></article><a class="back-to-top" href="/archive/controlled-vocabulary-tool" rel="noopener"><i class="back-to-top__icon icon icon-chevron-up" aria-hidden="true"></i><p class="back-to-top__text">Back to top</p><script async src="/scripts/back-to-top.js" type="text/javascript"></script></a></main><footer class="footer"></footer></body></html>